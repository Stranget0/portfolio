---
import type { Polymorphic } from "astro/types";
import AppearingLine from "./AppearingText/AppearingLine.astro";

type Props<T extends "button" | "a"> = Polymorphic<{ as: T }> & {
	visualType?: "simple" | "outline";
	size?: "default" | "small";
	text?: string;
};

const {
	visualType = "simple",
	class: className,
	text,
	as: Tag = "button",
	size = "default",
	...rest
} = Astro.props;
---

<Tag
	class:list={[
		"rounded relative outline-offset-4 transition-interactive w-full border-current no-underline disabled:(opacity-30 scale-100 bg-primary-500)",
		size === "default" && "p-4 text-button",
		size === "small" && "px-2 py-1 text-xs",
		visualType === "simple" &&
			"bg-primary-100 text-primary-950 hover:bg-accent-50",
		visualType === "outline" && "border-2",
		className,
	]}
	{...rest}
>
	{
		text ? (
				<slot name="before"/>
				<AppearingLine as="span" text={text} />
				<slot name="after"/>
		) : (
			<slot>LOREM IPSUM NIHIL NOVI</slot>
		)
	}
</Tag>
