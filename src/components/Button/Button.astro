---
import type { HTMLTag } from "astro/types";
import type { ButtonProps } from "./types";
import { buttonClass } from "./utils";
import { tooltipIgnore } from "../Tooltip/serverUtils";
import { tooltipAttr } from "../Tooltip/constants";

type Props<T extends HTMLTag = "button"> = ButtonProps<T>;

const {
	visualType = "simple",
	class: className,
	as: Tag = "button",
	size = "default",
	invertColor,
	classOverride,
	targetSelector,
	targetClassToggle,
	closeType,
	...rest
} = Astro.props;

const tooltipIgnoreData = (rest as any)[tooltipAttr] ? null : tooltipIgnore;
---

<Tag
	class={buttonClass({
		class: className,
		classOverride,
		invertColor,
		size,
		visualType,
	})}
	data-target-selector={targetSelector}
	data-target-class-toggle={targetClassToggle}
	data-close-type={closeType}
	{...tooltipIgnoreData}
	{...rest as any}
>
	<slot>LOREM IPSUM NIHIL NOVI</slot>
</Tag>

<script>
	import "./buttonFunctionality";
</script>
