---
import AccordionItem from "./AccordionItem.astro";
---

<ul class="accordion gap-6 max-w-6xl w-full menu-opafocus" flex="~ col">
	<AccordionItem />
	<AccordionItem />
	<AccordionItem />
</ul>

<script>
	const accordions = document.querySelectorAll(".accordion");
	for (const accordion of accordions) {
		let activeAccordionOption = accordion.querySelector(".expanded");
		accordion.addEventListener("click", (e) => {
			const target = e.target as HTMLElement | null;
			const pressedAccordionOption = target?.closest(".accordion-panel");
			if (!pressedAccordionOption) return;
			activeAccordionOption?.classList.remove("expanded");
			pressedAccordionOption.classList.add("expanded");
			activeAccordionOption = pressedAccordionOption;
		});
	}
</script>
