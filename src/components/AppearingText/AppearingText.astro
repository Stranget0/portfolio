---
import type { HTMLTag, Polymorphic } from "astro/types";
import { playAudioContainerTooltip } from "./serverUtils";

type Props<T extends HTMLTag> = Polymorphic<{ as: T }> & {
	wordTimings: number[];
	wordsReference: string[];
	audioPath: string;
	isDebug?: boolean;
	id: string;
};

const {
	as: Tag = "p",
	wordTimings,
	audioPath,
	wordsReference,
	isDebug,
	...other
} = Astro.props;

const tooltipData =
	audioPath && wordTimings.length > 0 && playAudioContainerTooltip;
---

<!-- TODO: Fix typing error -->
<Tag
	{...other as any}
	{...tooltipData}
	data-audio-timings={wordTimings}
	data-audio-reference={isDebug ? wordsReference : undefined}
	data-audio-path={audioPath}
	data-debug={isDebug}
>
	<slot />
</Tag>
