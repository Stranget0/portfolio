---
import Button from "@components/Button.astro";
import Footer from "@components/Footer.astro";
import ThreeScene from "@components/ThreeScene/ThreeScene.astro";
import Layout from "@layouts/Layout.astro";
import Projects from "@components/_Organisms/Projects/Projects.astro";
import HeroSection from "@components/_Organisms/HeroSection/HeroSection.astro";
import OtherTechnologies from "@components/_Organisms/OtherTechnologies/OtherTechnologies.astro";
import myImage from "@assets/me.png";
import { Image } from "@astrojs/image/components";
import AppearingText from "@components/AppearingText/AppearingText.astro";
import AppearingLine from "@components/AppearingText/AppearingLine.astro";
import ContactSection from "@components/_Organisms/ContactSection/ContactSection.astro";

// const text =
// 	"We have a fantastic little sky! Let's put some happy little bushes on the other side now. Take your time. Speed will come later. Look at them little rascals. That's a crooked tree. We'll send him to Washington. You can create anything that makes you happy. Just let go - and fall like a little waterfall. We must be quiet, soft and gentle. We don't have anything but happy trees here. Let's build some happy little clouds up here. I thought today we would do a happy little picture. We need dark in order to show light. That's a son of a gun of a cloud. Maybe there's a happy little bush that lives right there. Maybe we got a few little happy bushes here, just covered with snow. We'll put all the little clouds in and let them dance around and have fun. Only God can make a tree - but you can paint one. This is a fantastic little painting. Didn't you know you had that much power? You can move mountains. You can do anything. You can create beautiful things - but you have to see them in your mind first. I was blessed with a very steady hand; and it comes in very handy when you're doing these little delicate things. A big strong tree needs big strong roots. Volunteering your time; it pays you and your whole community fantastic dividends. Just make little strokes like that. Maybe there's a little something happening right here. Van Dyke Brown is a very nice brown, it's almost like a chocolate brown. We'll have a super time. Use what happens naturally, don't fight it.";
// const textMock = text.split(" ").reduce((acc, word, i) => {
// 	if (!word.trim()) return acc;
// 	const lastWordEnd = acc[i - 1]?.[2] || 0;
// 	const lastChar = word.at(word.length - 1) || "";
// 	const isEndSentence = /[.?!]/.test(lastChar);
// 	const beginAt = lastWordEnd;
// 	const additionalEnd = isEndSentence ? 500 : 200;
// 	const endAt = beginAt + word.length * 50 + additionalEnd;
// 	acc.push([endAt - beginAt, `${word} `, endAt]);
// 	return acc;
// }, [] as [number, string, number][]);
---

<Layout>
	<div data-taxi-view class="w-full">
		<ThreeScene />
		<HeroSection />
		<section
			class="section flex flex-col justify-between gap-12 md:flex-row relative text-primary-50 glass-backdrop"
		>
			<div class="max-w-full min-w-xl max-w-5xl hidden md:block">
				<Image
					src={myImage}
					alt="Picture of me"
					fit="contain"
					aspect-ratio="1:20"
					class="rounded-full"
				/>
			</div>
			<AppearingText
				as="article"
				wordTimings={[]}
				class="flex flex-col flex-shrink align-end text-center md:text-right prose"
			>
				<AppearingLine
					as="h2"
					class="text-subtitle-1 mix-blend-difference"
					text="Nice to meet you!"
				/>
				<div class="md:hidden max-w-50 mx-auto">
					<Image
						src={myImage}
						alt="Picture of me"
						aspect-ratio="1:1"
						fit="contain"
						class="rounded-full"
					/>
				</div>
				<AppearingLine
					class="text-body mix-blend-difference"
					text={`We wash our brush with odorless thinner. Just let these leaves jump off the brush Let's make a nice big leafy tree. Have fun with it. Use your imagination, let it go. You don't want to kill all your dark areas they are very important.

				Learn when to stop. Didn't you know you had that much power? You can move mountains. You can do anything. Isn't it great to do something you can't fail at? This is a fantastic little painting. Now we don't want him to get lonely, so we'll give him a little friend. Little trees and bushes grow however makes them happy.
				
				Steve wants reflections, so let's give him reflections. This is gonna be a happy little seascape. Be so very light. Be a gentle whisper. This piece of canvas is your world.
				
				Don't kill all your dark areas - you need them to show the light. Trees grow in all kinds of ways. They're not all perfectly straight. Not every limb is perfect. You don't have to be crazy to do this but it does help. This is your world, whatever makes you happy you can put in it. Go crazy.
				
				It's cold, but it's beautiful. Every single thing in the world has its own personality - and it is up to you to make friends with the little rascals. Let your imagination just wonder around when you're doing these things.
				
				It takes dark in order to show light. I can't think of anything more rewarding than being able to express yourself to others through painting. We don't have to be concerned about it. We just have to let it fall where it will. There are no limits in this world. There's not a thing in the world wrong with washing your brush.`}
				/>

				<Button
					wordTimings={[]}
					text="Contact me!"
					class="my-8 max-w-max ml-auto"
				/>
			</AppearingText>
		</section>
		<Projects />
		<OtherTechnologies />
		<section
			class="section h-screen relative glass-backdrop"
			data-static-h="100vh"
		>
			<Button text="Help me make more!" wordTimings={[]} />
		</section>

		<ContactSection />
		<Footer />
	</div>
</Layout>
